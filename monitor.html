<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Auto Grease Monitor</title>
    	<style>
		#warpper{ width: 1200px; height:1000px;}	
		header{	width: 65%;	height: 70px;}
		header h1{ text-align: center; 	}
		header h2{ text-align: center;	}

		#tablecontainer{
		    position: relative;
			top: 35px;
			width: 1250px;
			height: 275px;
			border : 1px solid black;}	
	
		#subTitle{ position : relative; top:35px; left:0px; }
		#txt {
				position: relative;
				top: 0px;
				left: 1190px
			}
		#wrap1{
				 position : relative;
				 top: 40px;
				 left: 0px;
				 border: 1px solid black; }

	    #right_div1{
				 position : relative; 
			 	 top: 10px;
				 left: 908px;
				 border: 1px solid black;
				 padding: 15px;
			 }
		#left_div1{
				 position : relative;
				 top: -202px;
				 left :10px;
				 border: 1px solid  black;
				 padding: 15px;		 
			 }
	    #right_div2{
				 position : relative; 
			 	 top: -192px;
				 left: 908px;
				 border: 1px solid black;
				 padding: 15px;
			 }

	
		#left_div2{
				 position : relative;
				 top: -404px;
				 left :10px;
				 border: 1px solid  black;
				 padding: 15px;		 
			 }
		aside{ font-size	: 14px; display	: block; width: 175px; height: 250px; float: left; margin-top: 5px;
			margin-left : 5px;}

		aside table, th{ border-collapse: collapse; border: 1px solid black;
		    padding: 5px; text-align: center;}

		article{}

		table, th, td { border-collapse: collapse;}

		#div1{position: absolute; top : 5px; left: 180px; }
		.sensornumber div{ float:left; border-collapse: collapse;
			font-size: 1em; font-weight: bold; color: white; text-align: center; margin: 2px ; 
			width : 25px; height: 25px; border-radius : 3px; background-color: darkgray;	}

		section{ margin-top  : 30px; margin-left : 10px; padding: 6px; }



		address{		}

		.line {overflow: hidden;}
	
		.seat{	margin: 2px ; float: left; width : 25px; height: 25px; border-radius : 3px;	}

		.init{ background: gray; }
		.moved{background: green;}
		.stalled{background: red;}
		.signalOn1{background: blue;}
		.signalOn2{background: lightblue;}

		#test1{ position: relative; top: 40px;  font-size: 14px; display:  text-align: center;  }

	</style>
<!-- start of goole gauge --> 
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
	google.charts.load('current', {'packages':['bar']});
	google.charts.setOnLoadCallback(drawStuff);
	
	function drawStuff() {
		var data = new google.visualization.arrayToDataTable([
			['Move', 'percentage'],
			["Lube1",100],
			["Lube2", 80],
			["Lube3",  0],
			["Lube4", 80],
		]);

		var option = {
			totle: 'chess opening moves',
			width: 300,
			legend: { position: 'none' },
			axes: {
			x : {
				0: { side: 'top', label: ''}
			    	}
				},
				bar : { groupWidth: "20%" }
			};

			var chart = new google.charts.Bar(document.getElementById('right_div1'));

			chart.draw(data, google.charts.Bar.convertOptions(option));
			};
</script>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
	google.charts.load('current', {'packages':['bar']});
	google.charts.setOnLoadCallback(drawStuff);
	
	function drawStuff() {
		var data = new google.visualization.arrayToDataTable([
			['Move', 'percentage'],
			["eunwho", 30],
			["eunwho", 46],
			["eunwho",100],
			["eunwho", 20],
		]);

		var option = {
			totle: 'chess opening moves',
			width: 300,
			legend: { position: 'none' },
			axes: {
			x : {
				0: { side: 'top', label: ''}
			    	}
				},
				bar : { groupWidth: "20%" }
			};

			var chart = new google.charts.Bar(document.getElementById('right_div2'));

			chart.draw(data, google.charts.Bar.convertOptions(option));
			};
</script>
<!-- end of goole gauge --> 


	<script src="/socket.io/socket.io.js"></script>
	<script src="http://code.jquery.com/jquery-1.10.2.js"></script>

	<script>
		var socket = io.connect('http://192.168.0.20:7532');
		var signalToggle = true;
		socket.on('stalled',function( data ) {
			var $target = $('div[data-x = ' + data.x + '][data-y = ' + data.y + ']');
			$target.removeClass('init moving').addClass('stalled');
			console.log("reserve return");
		});
		socket.on('moved',function( data ) {
			var $target = $('div[data-x = ' + data.x + '][data-y = ' + data.y + ']');
			$target.removeClass('init stalled').addClass('moved');
		});
		socket.on('received',function( data ) {
			var $target = $('div[data-x = ' + data.x + '][data-y = ' + data.y + ']');
			if( signalToggle == true){
				signalToggle = false;
				$target.removeClass('init stalled moved signalOn1').addClass('signalOn2');
			} else{
				signalToggle = true;
				$target.removeClass('init stalled moved signalOn2').addClass('signalOn1');
			}
			console.log("received On");
		});
		
	</script>

	<script>		
		$(document).ready(function() {
			// define variable
			var onClickSeat = function () {
				var x = $(this).attr('data-x');
				var y = $(this).attr('data-y');

				if(confirm('Confirm seat Reservation ?')){
					//$(this).off('click');
					socket.emit('reserve',{
						x: x,
						y: y
					});
				} else {
					alert('Cancel seat Reservation');
				}
			};
			
			$.getJSON('/wsnObj', { dummy: new Date().getTime() }, function(wsnObj){
			
			// Creat Seat
				$.each(wsnObj, function (groupId, endDeviceGroup ) {
					// Create Document object
					var $line = $('<div></div>').addClass('line');
					$.each(endDeviceGroup, function( deviceId, sensCtrl ){
						// Create Document Object and ADD to var $line
						var $output = $('<div></div>',{	'class':'seat',	'data-x': deviceId,'data-y': groupId }).appendTo($line);
						$output.on('click',onClickSeat);
						
						var status = sensCtrl.endDevice.status;

						if( status == 0 ){			
							$output.removeClass("moved stalled").addClass('init'); 
						}else if( status == 1 ) {	
							$output.removeClass("init stalled").addClass('moved'); 
							$output.addClass('moved'); 
						}else if( status == 2 ) {
							$output.removeClass("init moved").addClass('stalled'); 
						} 
					});

					// Add Document Object
					$line.appendTo('section');
				});
			});
		});
	</script>

	<script>
		function startTime() {
		    var today = new Date();
		    var h = today.getHours();
		    var m = today.getMinutes();
		    var s = today.getSeconds();
		    m = checkTime(m);
		    s = checkTime(s);
		    document.getElementById('txt').innerHTML =
		    h + ":" + m + ":" + s;
		    var t = setTimeout(startTime, 500);
		}
		
		function checkTime(i) {
		    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
		    return i;
		}


	</script>

<body onload="startTime()">


	<div class="wrapper">
	<header>
		<h1>LUBRICATION RECORD</h1>
		<h2> HHI HD-10000 Auto Grease Monitoring System </h2>
	</header>


   	<div id="subTitle">
	    <div class = "content2">
	    	<div>
	    		<div> [ Ship's name : HD10000    ] &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp [ Lubrication part : Crane ]   [Inspection date : 2016.07.01]</div>  
				<div id="txt"></div>
	    	</div>
	    </div> 
	</div>

	<div id="tablecontainer">
   	<aside> 
   		<table id="tbthsensor">
   			<tr>	<th>LOC. PART</th><th> PMP/S NO </th> </tr>	
	    		<tr> <th rowspan="3">JIB PORT</th><th>NO.1</th> </tr>
	 		<tr> <th>NO.2</th> </tr>
	 		<tr> <th>NO.3</th> </tr>
			
	    		<tr> <th rowspan="3">JIB STBD</th><th>NO.1</th> </tr>
	 		<tr>	<th>NO.2</th>	</tr>
	 		<tr>	<th>NO.3</th>	</tr>
	 		<tr>	<th>A-PORT</th><th>NO.1</th> </tr>
	 		<tr>	<th>A-STBD</th><th>NO.1</th> </tr>
	    </table>
	</aside>


	<div id="div1">
		<div class= "sensornumber">
			<div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div>
			</div>
		</div>	

 		<section>
		</section>
	</div>
	
</wrapper>

	<div id="wrap1" style="width: 1250px; height: 455px;">	
			<div id="right_div1" style="width: 300px; height: 180px;"></div>
			<div id="left_div1" style="width: 855px; height: 180px;">
				 	<table border="1" width="850" height="180">
						<tr align="center">
							<td width="85">version</td>
							<td width="85">&nbsp;</td>
							<td width="85">group#</td>
							<td width="85">&nbsp;</td>
							<td width="85">sensor#</td>
							<td width="85">&nbsp;</td>
							<td width="85">MY</td>
							<td width="85">&nbsp;</td>
							<td width="85">MP</td>
							<td width="85">&nbsp;</td>
						</tr>
						<tr align="center">
							<td>SH</td>
							<td>&nbsp;</td>
							<td>SL</td>
							<td>&nbsp;</td>
							<td>DH</td>
							<td>&nbsp;</td>
							<td>DL</td>
							<td>&nbsp;</td>
							<td>%V</td>
							<td>&nbsp;</td>
						</tr>
						<tr align="center">
							<td>solar Volt</td>
							<td>&nbsp;</td>
							<td>bettery Volt</td>
							<td>&nbsp;</td>
							<td>coreTemp</td>
							<td>&nbsp;</td>
							<td>chip Volt</td>
							<td>&nbsp;</td>
							<td>DB</td>
							<td>&nbsp;</td>
						</tr>
						<tr align="center">
							<td>NI</td>
							<td>&nbsp;</td>
							<td>Packet ID</td>
							<td>&nbsp;</td>
							<td>number of sensors</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
					</table>
				 </div>
			<div id="right_div2" style="width: 300px; height: 180px;"></div>
			<div id="left_div2" style="width: 855px; height: 180px;">
					<table border="1" width="850" height="180" >
						<tr align="center">
							<td width="85">version</td>
							<td width="85">&nbsp;</td>
							<td width="85">group#</td>
							<td width="85">&nbsp;</td>
							<td width="85">sensor#</td>
							<td width="85">&nbsp;</td>
							<td width="85">MY</td>
							<td width="85">&nbsp;</td>
							<td width="85">MP</td>
							<td width="85">&nbsp;</td>
						</tr>
						<tr align="center">
							<td>SH</td>
							<td>&nbsp;</td>
							<td>SL</td>
							<td>&nbsp;</td>
							<td>DH</td>
							<td>&nbsp;</td>
							<td>DL</td>
							<td>&nbsp;</td>
							<td>%V</td>
							<td>&nbsp;</td>
						</tr>
						<tr align="center">
							<td>solar Volt</td>
							<td>&nbsp;</td>
							<td>bettery Volt</td>
							<td>&nbsp;</td>
							<td>coreTemp</td>
							<td>&nbsp;</td>
							<td>chip Volt</td>
							<td>&nbsp;</td>
							<td>DB</td>
							<td>&nbsp;</td>
						</tr>
						<tr align="center">
							<td>NI</td>
							<td>&nbsp;</td>
							<td>Packet ID</td>
							<td>&nbsp;</td>
							<td>number of sensors</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
					</table>										
			</div>
 	 	 </div>	
	<div id="test1">		
	
		<p> eunwho@naver.com &nbsp;&nbsp;&nbsp; tel  82 51 262 7532. fax  82 51 262 7534  H.P. 82 010 3027 4445 Copyright 2016 Eunwho Power Electonics </p>
	
	</div>

</body>

</html>


	

